(this["webpackJsonpcoin-exchange"]=this["webpackJsonpcoin-exchange"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(12),r=a.n(i),s=(a(74),a(68)),l=a(41),o=a(8),d=a.n(o),u=a(15),h=a(6),j=(a(76),a(35)),b=a(40),f=a(28),p=a(59),v=a(1);function x(e){var t=e.disabled?{display:"inline-block",cursor:"not-allowed"}:{},a=e.disabled?{pointerEvents:"none"}:{};return Object(v.jsx)(b.a,{placement:"top",trigger:["hover","focus"],overlay:Object(v.jsx)(f.a,{children:Object(v.jsx)(f.a.Title,{children:e.popup})}),children:Object(v.jsx)("div",{style:t,children:Object(v.jsx)(p.a,{onClick:e.onClick,style:a,disabled:e.disabled,variant:e.variant,children:e.text})})})}function O(e){var t=e.disabled?{display:"inline-block",cursor:"not-allowed"}:{};return Object(v.jsx)(b.a,{placement:"top",trigger:["hover","focus"],overlay:Object(v.jsx)(f.a,{children:Object(v.jsx)(f.a.Title,{children:e.popup})}),children:Object(v.jsx)("div",{style:t,children:e.text})})}var m={Settings:"Settings",BuyMore:"BuyMore",SellSome:"SellSome",ToggleBalance:"ToggleBalance",Deposit:"Deposit",Withdraw:"Withdraw",BuyNew:"BuyNew",BuyShares:"BuyShares",SellShares:"SellShares",SaveSettings:"SaveSettings",Help:"Help"},g=a(38),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(0===e)return e;for(var a=parseFloat(Number(e).toFixed(t));0===a;++t){if(15===t)return e;a=parseFloat(Number(e).toFixed(t))}return a};a(80);var y=a(60),S=a.n(y);function w(e){return 60*e}var B,C="PaperCoinList",T=function(e){var t=JSON.parse(localStorage.getItem(C));return t&&e&&e(t),t},N=function(e,t){var a=e?e.find((function(e){return e.ticker===t})):void 0;return a?a.price:""},A=function(e,t){if(!e)return!1;var a=e.find((function(e){return"BTC"===e.ticker})),n=Date.parse(a.last_updated),c=t?(Date.now()-t)/1e3:w(2),i=(Date.now()-n)/1e3;return c>w(1)&&i>w(5)},D=function(){var e=Object(u.a)(d.a.mark((function e(t,a){var n,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=T(null))||A(n)){e.next=6;break}return c=n.find((function(e){return"BTC"===e.ticker})),i=new Date(Date.parse(c.last_updated)),a("Using cached prices, last updated at: ".concat(i.toLocaleString())),e.abrupt("return",t(n));case 6:return e.next=8,S.a.get("https://api.coinpaprika.com/v1/tickers").catch((function(e){var c=n.find((function(e){return"BTC"===e.ticker})),i=new Date(Date.parse(c.last_updated));return a("Failed to retrieve updated prices, cached prices will be used.  Last update was: ".concat(i.toLocaleString())),t(n)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(e,t,a){D(e,t).then((function(n){if(void 0!==n){var c=function(e,t){var a=new Set;return e?e.filter((function(e){var n=t(e);return!a.has(n)&&(a.add(n),e)})):e}(n.data,(function(e){return e.symbol}));if(c){var i=c.map((function(e){return function(e){return{key:e.id,name:e.name,ticker:e.symbol,price:e.quotes.USD.price,last_updated:e.last_updated,last_refresh:e.last_updated}}(e)}));e(i),s=i,localStorage.setItem(C,JSON.stringify(s));var r=new Date(Date.now());t("Prices updated at: ".concat(r.toLocaleString())),a()}}var s}),(function(e){t("Failed to load prices: ".concat(e)),console.log("getCoinTicker failed: ".concat(e))}))};function P(e,t){var a=k(Math.abs(t),2);return 0===t?"No gain, no loss":e?t>=0?"Profitted by $".concat(a):"Loss of $".concat(a):t>=0?"Profittable":"Loss encountered"}var H=g.a.td(B||(B=Object(j.a)(["\n    border: 2px solid #cccccc;\n    width: 25vh;\n"])));function R(e){var t=N(e.coinTicker,e.ticker),a=e.shares*t,n=a-e.shares*e.costBasis,c=n>=0?"price-profit":"price-loss",i=n>=0?"\u25b2":"\u25bc",r=e.showBalance?"$"+k(a):i,s=e.showBalance?"$"+k(e.costBasis):"-",l="Buy more ".concat(e.ticker),o="Sell your ".concat(e.ticker),d=P(e.showBalance,n);return Object(v.jsxs)("tr",{className:"coin-row",children:[Object(v.jsx)(H,{children:e.name}),Object(v.jsx)(H,{children:e.ticker}),Object(v.jsx)(H,{children:e.shares}),Object(v.jsxs)(H,{children:["$",k(t)]}),Object(v.jsx)(H,{children:s}),Object(v.jsx)(H,{children:Object(v.jsx)("div",{className:c,children:Object(v.jsx)(O,{popup:d,text:r,disabled:!1})})}),Object(v.jsx)(H,{children:Object(v.jsxs)("div",{className:"td-action-buttons",children:[Object(v.jsx)(x,{disabled:!1,variant:"success",popup:l,text:"Buy",onClick:function(t){t.preventDefault(),e.handleAction(m.BuyMore,e.id)}}),Object(v.jsx)(x,{disabled:!1,variant:"danger",popup:o,text:"Sell",onClick:function(t){t.preventDefault(),e.handleAction(m.SellSome,e.id)}})]})})]})}function $(e){return Object(v.jsx)("div",{children:Object(v.jsxs)("table",{className:"table table-primary table-borders",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Ticker"}),Object(v.jsx)("th",{children:"Shares"}),Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("th",{children:"Cost Basis"}),Object(v.jsx)("th",{children:"Balance"}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("tbody",{children:function(){if(e.coinBalance)return e.coinBalance.map((function(t){return Object(v.jsx)(R,Object(l.a)({id:t.key,showBalance:e.showBalance,coinTicker:e.coinTicker,handleAction:e.handleAction},t),t.key)}))}()})]})})}var L=a(64),V=a(65),q=a(69),I=a(67),M=(a(101),function(e){Object(q.a)(a,e);var t=Object(I.a)(a);function a(){return Object(L.a)(this,a),t.apply(this,arguments)}return Object(V.a)(a,[{key:"render",value:function(){return Object(v.jsx)("header",{className:"App-header",children:Object(v.jsx)("h1",{className:"App-title",children:"Paper Coin Exchange"})})}}]),a}(n.Component)),E=a(112),W=a(111),J=a(39);function z(e){var t,a=e.coinBalance?e.coinBalance.find((function(t){return t.ticker===e.dialogTicker})):void 0,n=null!==(t=e.dialogTicker)&&void 0!==t?t:"",c=N(e.coinTicker,n),i=e.modalTextFieldStatus?"form-group has-success":"form-group has-danger",r=e.modalTextFieldStatus?"form-control is-valid":"form-control is-invalid",s=e.modalTextFieldStatus?"valid-feedback":"invalid-feedback",l=function(t){var n,c;n=t,c=a,e.onValidator({quantity:n,coin:c})};return Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,backdrop:"static",keyboard:!1,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:e.modalTitle})}),Object(v.jsxs)(E.a.Body,{children:[Object(v.jsx)(W.a,{className:"table table-primary table-borders",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Coin"}),Object(v.jsx)("td",{children:n})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("td",{children:c})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:e.availability}),Object(v.jsx)("td",{children:e.cashSharesAvailable})]})]})}),Object(v.jsxs)("div",{className:"flex-filter",children:[e.inputTitle,Object(v.jsx)("div",{children:Object(v.jsx)(p.a,{variant:"danger",size:"sm",onClick:function(){e.onValidator({quantity:e.cashSharesAvailable,coin:a})},children:"All"})})]}),Object(v.jsxs)("div",{className:i,children:[Object(v.jsx)(J.a,{className:r,id:"text-input",name:"input-name",placeholder:"Please enter a dollar amount",decimalsLimit:18,allowNegativeValue:"false",value:isNaN(e.quantity)?0:e.quantity,defaultValue:e.initialValue,prefix:e.prefix,intlConfig:{locale:"en-US",currency:"USD"},onValueChange:function(e){return l(e)}}),Object(v.jsx)("div",{className:s,children:e.modalStatusMessage})]})]}),Object(v.jsxs)(E.a.Footer,{children:[Object(v.jsx)(p.a,{variant:"secondary",onClick:function(){e.handleClose()},children:"Cancel"}),Object(v.jsx)(p.a,{disabled:!e.modalTextFieldStatus,onClick:function(t){e.handleAction(m.BuyShares,{key:a.key,shares:e.quantity}),e.handleClose()},variant:"primary",children:e.actionTitle})]})]})}a(102);function U(e){var t=e.coinTicker?e.coinTicker.find((function(t){return t.ticker===e.dialogTicker})):void 0,a=function(t,a){e.onValidator({quantity:t,coin:a})},n=function(t){var n=e.selectCoin(t);a(e.quantity,n)},i=function(e,t){return 0===t.length||e.key.toLowerCase().includes(t.toLowerCase())||e.name.toLowerCase().includes(t.toLowerCase())||e.ticker.toLowerCase().includes(t.toLowerCase())},r=t?k(N(e.coinTicker,t.ticker)):"",s=e.modalTextFieldStatus?"form-group has-success":"form-group has-danger",l=e.modalTextFieldStatus?"form-control is-valid":"form-control is-invalid",o=e.modalTextFieldStatus?"valid-feedback":"invalid-feedback",d=c.a.useState(""),u=Object(h.a)(d,2),j=u[0],b=u[1],f=!!t;return Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,backdrop:"static",keyboard:!1,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:e.modalTitle})}),Object(v.jsxs)(E.a.Body,{children:[Object(v.jsxs)("div",{className:"flex-filter",id:"filter-div",children:[Object(v.jsx)("label",{htmlFor:"filter-select",className:"form-label mt-4",children:"Select ticker"}),Object(v.jsx)("div",{children:Object(v.jsx)("input",{type:"text",className:"form-control",id:"filter-coins",name:"filter-coins",placeholder:"Filter list by ticker name",onChange:function(t){return function(t){b(t);var a=e.coinTicker.map((function(e){return i(e,t)?e:null}));!(a=a.filter(Boolean)).find((function(t){return t&&e.dialogTicker===t.ticker}))&&a.length>0&&n(a[0].ticker)}(t.target.value)}})})]}),Object(v.jsx)("select",{className:"form-select",id:"filter-select",onChange:function(e){n(e.target.value)},value:e.dialogTicker,placeholder:"Select ticker name...",children:function(t){if(void 0!==e.coinTicker&&!0===e.show){var a=e.coinTicker.map((function(e){return i(e,t)?Object(v.jsx)("option",{value:e.ticker,children:e.ticker},e.ticker):null}));return a.unshift(Object(v.jsx)("option",{value:""},"null")),a}return null}(j)}),Object(v.jsx)("br",{}),Object(v.jsx)(W.a,{className:"table table-primary table-borders",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Coin"}),Object(v.jsx)("td",{children:e.dialogTicker})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("td",{children:r})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:e.availability}),Object(v.jsx)("td",{children:e.cashSharesAvailable})]})]})}),Object(v.jsxs)("div",{className:"flex-filter",children:[e.inputTitle,Object(v.jsx)("div",{children:Object(v.jsx)(p.a,{variant:"danger",size:"sm",onClick:function(){e.onValidator({quantity:e.cashSharesAvailable,coin:t})},children:"All"})})]}),Object(v.jsxs)("div",{className:s,children:[Object(v.jsx)(J.a,{className:l,id:"text-input",name:"input-name",placeholder:"Please enter a dollar amount",decimalsLimit:18,allowNegativeValue:"false",value:e.quantity,defaultValue:e.initialValue,disabled:!f,prefix:e.prefix,intlConfig:{locale:"en-US",currency:"USD"},onValueChange:function(e){a(e,t)}}),Object(v.jsx)("div",{className:o,children:e.modalStatusMessage})]})]}),Object(v.jsxs)(E.a.Footer,{children:[Object(v.jsx)(p.a,{variant:"secondary",onClick:function(){e.handleClose()},children:"Cancel"}),Object(v.jsx)(p.a,{disabled:!e.modalTextFieldStatus,onClick:function(a){e.handleAction(m.BuyShares,{key:t.key,shares:e.quantity}),e.handleClose()},variant:"primary",children:e.actionTitle})]})]})}function _(e){var t=e.coinBalance?e.coinBalance.find((function(t){return t.ticker===e.dialogTicker})):void 0,a=t?t.ticker:"",n=N(e.coinTicker,a),c=e.modalTextFieldStatus?"form-group has-success":"form-group has-danger",i=e.modalTextFieldStatus?"form-control is-valid":"form-control is-invalid",r=e.modalTextFieldStatus?"valid-feedback":"invalid-feedback";return Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,backdrop:"static",keyboard:!1,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:e.modalTitle})}),Object(v.jsxs)(E.a.Body,{children:[Object(v.jsx)(W.a,{className:"table table-primary table-borders",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Coin"}),Object(v.jsx)("td",{children:e.dialogTicker})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("td",{children:n})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:e.availability}),Object(v.jsx)("td",{children:e.cashSharesAvailable})]})]})}),Object(v.jsxs)("div",{className:"flex-filter",children:[e.inputTitle,Object(v.jsx)("div",{children:Object(v.jsx)(p.a,{variant:"danger",size:"sm",onClick:function(){e.onValidator(e.cashSharesAvailable)},children:"All"})})]}),Object(v.jsxs)("div",{className:c,children:[Object(v.jsx)("input",{type:"text",className:i,id:"text-input",value:e.quantity,name:"input-name",placeholder:"Please enter number of shares to sell",onChange:function(t){return e.onValidator(t.target.value)}}),Object(v.jsx)("div",{className:r,children:e.modalStatusMessage})]})]}),Object(v.jsxs)(E.a.Footer,{children:[Object(v.jsx)(p.a,{variant:"secondary",onClick:function(){e.handleClose()},children:"Cancel"}),Object(v.jsx)(p.a,{disabled:!e.modalTextFieldStatus,onClick:function(a){e.handleAction(m.SellShares,{key:t.key,shares:e.quantity}),e.handleClose()},variant:"primary",children:e.actionTitle})]})]})}function K(e){var t=function(e){return e?"Completed":"Loading..."},a=c.a.useState(0),n=Object(h.a)(a,2),i=n[0],r=n[1],s=c.a.useState(5),l=Object(h.a)(s,2),o=l[0],d=l[1],u=i>=o;return c.a.useEffect((function(){if(e.show){var t=setInterval((function(){r((function(e){return e+1})),Boolean(e.coinBalance)&&Boolean(e.coinTicker)&&void 0!==e.settings.feeRate&&(e.handleClose(),r(0))}),1e3);return function(){return clearInterval(t)}}}),[e]),Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:e.modalTitle})}),Object(v.jsxs)(E.a.Body,{children:[Object(v.jsx)(W.a,{className:"table table-primary table-borders",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Balances"}),Object(v.jsx)("td",{children:Object(v.jsx)("div",{children:function(){var a=Boolean(e.coinBalance);return Object(v.jsx)("div",{children:t(a)})}()})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Tickers"}),Object(v.jsx)("td",{children:Object(v.jsx)("div",{children:function(){var a=Boolean(e.coinTicker);return Object(v.jsx)("div",{children:t(a)})}()})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Settings"}),Object(v.jsx)("td",{children:Object(v.jsx)("div",{children:function(){var a=void 0!==e.settings.feeRate;return Object(v.jsx)("div",{children:t(a)})}()})})]})]})}),Object(v.jsxs)("p",{children:[i," seconds have elapsed."]})]}),Object(v.jsx)(E.a.Footer,{children:Object(v.jsx)(p.a,{variant:"primary",disabled:!u,onClick:function(){e.handleReload(),d(i+5)},children:"Attempt to reload"})})]})}function G(e){return Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,backdrop:"static",keyboard:!1,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:e.modalTitle})}),Object(v.jsxs)(E.a.Body,{children:[Object(v.jsx)(W.a,{className:"table table-primary table-borders",children:Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Fees %"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",className:"form-control",id:"text-input",value:e.settings.feeRate,name:"input-name",placeholder:"Enter percentage that should be collected in fees",onChange:function(t){return e.onValidator({feeRate:t.target.value})}})})]})})}),Object(v.jsx)("div",{className:"flex-filter",children:e.inputTitle})]}),Object(v.jsxs)(E.a.Footer,{children:[Object(v.jsx)(p.a,{variant:"info",size:"sm",onClick:function(){e.handleClose(),e.handleAction(m.SaveSettings,{feeRate:e.settings.feeRate})},children:"Save"}),Object(v.jsx)(p.a,{variant:"info",size:"sm",onClick:function(){e.handleClose()},children:"Cancel"})]})]})}var Y,Q=a(66),X=a(23),Z="Nobody is looking over your shoulder, show your balances",ee="Hide balances from prying eyes",te=g.a.td(Y||(Y=Object(j.a)(["\n    border: 2px solid #cccccc;\n    width: 25vh;\n"])));function ae(e){var t=e.netBalance-e.totalDeposits,a=t>=0?"price-profit":"price-loss",n=t>=0?"\u25b2":"\u25bc",c="".concat(e.showBalance?"$"+k(e.netBalance,2):n),i="".concat(e.showBalance?"$"+k(e.totalDeposits,2):"-"),r="".concat(e.feeRate,"%"),s="".concat(e.showBalance?"$"+k(e.feesCollected,2):"-"),l=e.showBalance?"Hide Balance":"Show Balance",o=e.showBalance?ee:Z,d=e.showBalance?"warning":"info",u="".concat(e.showBalance?"$"+k(e.cashAvailable,2):"-"),h=e.cashAvailable>=1e3,j=h?"Withdraw $1000":"Insufficient funds available to withdraw $1000",b=P(e.showBalance,t);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("table",{className:"table table-primary table-borders",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Total Deposits"}),Object(v.jsx)("th",{children:"Net Balance"}),Object(v.jsx)("th",{children:"Cash Available"}),Object(v.jsx)("th",{children:"Fee Rate"}),Object(v.jsx)("th",{children:"Fees collected"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)(te,{children:i}),Object(v.jsx)(te,{children:Object(v.jsx)("div",{className:a,children:Object(v.jsx)(O,{popup:b,text:c,disabled:!1})})}),Object(v.jsx)(te,{children:u}),Object(v.jsx)(te,{children:r}),Object(v.jsx)(te,{children:s})]})})]}),Object(v.jsx)("div",{className:"button-toolbar-actions",children:Object(v.jsxs)(Q.a,{"aria-label":"Toolbar with button groups",children:[Object(v.jsx)(X.a,{className:"me-2","aria-label":"Show-Hide group",children:Object(v.jsx)(x,{disabled:!1,variant:d,popup:o,text:l,onClick:function(t){t.preventDefault(),e.handleAction(m.ToggleBalance,!e.showBalance)}})}),Object(v.jsx)(X.a,{className:"me-2","aria-label":"Reset group",children:Object(v.jsx)(x,{disabled:!1,variant:"danger",popup:"Reset all deposits and purchases",text:"Reset",onClick:function(t){t.preventDefault(),e.handleAction(m.Reset)}})}),Object(v.jsx)(X.a,{className:"me-2","aria-label":"Preferences group",children:Object(v.jsx)(x,{disabled:!1,variant:"secondary",popup:"Adjust application preferences",text:"Settings",onClick:function(t){t.preventDefault(),e.handleAction(m.Settings)}})}),Object(v.jsxs)(X.a,{className:"me-2","aria-label":"Deposit-Withdraw group",children:[Object(v.jsx)(x,{disabled:!1,variant:"success",popup:"Deposit $1000",text:"Deposit",onClick:function(t){t.preventDefault(),e.handleAction(m.Deposit,1e3)}}),Object(v.jsx)(x,{disabled:!h,variant:"danger",popup:j,text:"Withdraw",onClick:function(t){t.preventDefault(),e.handleAction(m.Withdraw,1e3)}})]}),Object(v.jsx)(X.a,{className:"me-2","aria-label":"Buy group",children:Object(v.jsx)(x,{disabled:!1,variant:"success",popup:"Purchase coins",text:"Buy",onClick:function(t){t.preventDefault(),e.handleAction(m.BuyNew)}})}),Object(v.jsx)(X.a,{className:"me-2","aria-label":"Help group",children:Object(v.jsx)(x,{disabled:!1,variant:"info",popup:"Get help for using this application",text:"Help",onClick:function(t){t.preventDefault(),e.handleAction(m.Help)}})})]})})]})}function ne(e){var t=function(){return void 0!==e.alertAcceptHandler&&void 0!==e.alertAcceptHandler.handler&&e.alertButtonAcceptText&&e.alertButtonAcceptText.length>0};return Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,backdrop:"static",keyboard:!1,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:e.alertHeading})}),Object(v.jsx)(E.a.Body,{children:e.alertMessage}),Object(v.jsxs)(E.a.Footer,{children:[t()?Object(v.jsx)(p.a,{onClick:function(){e.handleClose(),e.alertAcceptHandler.handler()},variant:"outline-danger",children:e.alertButtonAcceptText}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)(p.a,{onClick:function(){e.handleClose(),e.alertCancelHandler.handler()},variant:"outline-success",children:t()?"Cancel":"Close"})]})]})}var ce=a(21);function ie(e){var t=c.a.useState(0),a=Object(h.a)(t,2),n=a[0],i=a[1],r=["deposit","showBalance","prices","buy","fees"],s=e.netBalance-e.totalDeposits,l=s>=0?"price-profit":"price-loss",o=s>=0?"\u25b2":"\u25bc",d=P(e.showBalance,s),u="".concat(e.showBalance?"$"+k(e.netBalance,2):o),j=e.showBalance?"hide":"show",b=e.showBalance?"Hide Balance":"Show Balance",f=e.showBalance?ee:Z,g=e.showBalance?"warning":"info",y=e.showBalance?"Net Balance is displayed for anyone to see":"Net Balance displays as an arrow to hide the amount";return Object(v.jsxs)(E.a,{show:e.show,onHide:e.handleClose,children:[Object(v.jsx)(E.a.Header,{children:Object(v.jsx)(E.a.Title,{children:"Help using Paper Coin Exchange"})}),Object(v.jsx)(E.a.Body,{children:Object(v.jsxs)(ce.a,{onSelect:function(e){return i(e)},activeKey:r[n],id:"help-tabs",className:"mb-3",children:[Object(v.jsx)(ce.a,{eventKey:"deposit",title:"Deposit",children:Object(v.jsxs)("div",{className:"wrap-content",children:[Object(v.jsx)("div",{children:"Click the deposit button to deposit $1000 into your account"}),Object(v.jsx)("div",{className:"right-left-margin",children:Object(v.jsx)(x,{disabled:!1,variant:"success",popup:"Deposit $1000",text:"Deposit",onClick:function(t){t.preventDefault(),e.handleAction(m.Deposit,1e3)}})}),"Deposits: ",k(e.totalDeposits,2)]})}),Object(v.jsx)(ce.a,{eventKey:"showBalance",title:"Balance",children:Object(v.jsxs)("div",{className:"wrap-content",children:[Object(v.jsxs)("div",{children:["Click the ",b," button to ",j," your balances"]}),Object(v.jsx)("div",{className:"right-left-margin",children:Object(v.jsx)(x,{disabled:!1,variant:g,popup:f,text:b,onClick:function(t){t.preventDefault(),e.handleAction(m.ToggleBalance,!e.showBalance)}})}),Object(v.jsx)("div",{className:"right-margin",children:y}),Object(v.jsx)("div",{className:l,children:Object(v.jsx)(O,{popup:d,text:u,disabled:!1})})]})}),Object(v.jsx)(ce.a,{eventKey:"prices",title:"Price",children:Object(v.jsx)("div",{className:"wrap-content",children:Object(v.jsx)("div",{children:"Price are automatically updated every 5 minutes while an internet connection is available.  When an internet connection is not available, a cached version of the prices will be used"})})}),Object(v.jsx)(ce.a,{eventKey:"buy",title:"Buy",children:Object(v.jsxs)("div",{className:"wrap-content",children:[Object(v.jsx)("div",{children:"Click the Buy button to display a list of coins available to purchase and enter how much to buy.  When you click the Buy button, the help window will close"}),Object(v.jsx)("div",{className:"right-left-margin",children:Object(v.jsx)(x,{disabled:!1,variant:"success",popup:"Purchase coins",text:"Buy",onClick:function(t){t.preventDefault(),e.handleAction(m.BuyNew),e.handleClose()}})})]})}),Object(v.jsx)(ce.a,{eventKey:"fees",title:"Fees",children:Object(v.jsxs)("div",{className:"wrap-content",children:[Object(v.jsx)("div",{children:"You can change the settings to simulate fees on your purchases/sales.  Click the Settings button to change the fees rate.  When you click the Setting button, the help window will close"}),Object(v.jsx)("div",{className:"right-left-margin",children:Object(v.jsx)(x,{disabled:!1,variant:"secondary",popup:"Adjust application preferences",text:"Settings",onClick:function(t){t.preventDefault(),e.handleAction(m.Settings),e.handleClose()}})})]})})]})}),Object(v.jsxs)(E.a.Footer,{children:[Object(v.jsx)(p.a,{variant:"secondary",disabled:!1,onClick:function(e){e.preventDefault(),i((n+r.length-1)%r.length)},children:"Previous"}),Object(v.jsx)(p.a,{variant:"secondary",disabled:!1,onClick:function(e){e.preventDefault(),i((n+1)%r.length)},children:"Next"}),Object(v.jsx)(p.a,{variant:"primary",disabled:!1,onClick:e.handleClose,children:"Close"})]})]})}a(105);var re="Initial",se="Displayed",le="Completed",oe="PaperCoinBalance",de=function(e){var t=e.balance.filter((function(e){return e&&!isNaN(e.shares)&&e.shares>0})),a=JSON.stringify({balance:t,totalDeposits:e.totalDeposits,cash:e.cash,feesPaid:e.feesPaid});localStorage.setItem(oe,a)},ue=function(e){e.balance(null);var t,a,n,c,i=localStorage.getItem(oe),r=JSON.parse(i),s=[],l=0,o=0,d=0;null!==r&&(s=null!==(t=r.balance)&&void 0!==t?t:[],l=null!==(a=r.cash)&&void 0!==a?a:0,o=null!==(n=r.feesPaid)&&void 0!==n?n:0,d=null!==(c=r.totalDeposits)&&void 0!==c?c:0);var u=(s=s.map((function(e){return isNaN(e.costBasis)&&(e.costBasis=0),e}))).filter((function(e){return e&&!isNaN(e.shares)}));e.balance(u),e.cash(l),e.feesPaid(o),e.totalDeposits(d)},he="PaperSettings",je=function(e){var t=JSON.stringify({feeRate:e.feeRate});localStorage.setItem(he,t),console.log("settings: ".concat(t))},be=function(e){var t,a=localStorage.getItem(he),n=JSON.parse(a),c=0;null!==n&&(c=null!==(t=n.feeRate)&&void 0!==t?t:0);e.feeRate(c)};function fe(e,t,a,n){var c=e*t,i=a*n;return 0!==c&&0!==i?(c+i)/(e+a):0===c&&0===i?0:0===c?n:t}var pe=function(e){var t=c.a.useState(0),a=Object(h.a)(t,2),n=a[0],i=a[1],r=c.a.useState(0),o=Object(h.a)(r,2),j=o[0],b=o[1],f=c.a.useState(void 0),p=Object(h.a)(f,2),x=p[0],O=p[1],g=c.a.useState(void 0),k=Object(h.a)(g,2),y=k[0],S=k[1],w=c.a.useState(void 0),B=Object(h.a)(w,2),T=B[0],D=B[1],P=c.a.useState(!1),H=Object(h.a)(P,2),R=H[0],L=H[1],V=c.a.useState(void 0),q=Object(h.a)(V,2),I=q[0],E=q[1],W=c.a.useState(!1),J=Object(h.a)(W,2),Y=J[0],Q=J[1],X=c.a.useState(re),Z=Object(h.a)(X,2),ee=Z[0],te=Z[1],ce=c.a.useState(!1),pe=Object(h.a)(ce,2),ve=pe[0],xe=pe[1],Oe=c.a.useState(!1),me=Object(h.a)(Oe,2),ge=me[0],ke=me[1],ye=c.a.useState(!1),Se=Object(h.a)(ye,2),we=Se[0],Be=Se[1],Ce=c.a.useState(!1),Te=Object(h.a)(Ce,2),Ne=Te[0],Ae=Te[1],De=c.a.useState(""),Fe=Object(h.a)(De,2),Pe=Fe[0],He=Fe[1],Re=c.a.useState(0),$e=Object(h.a)(Re,2),Le=$e[0],Ve=$e[1],qe=c.a.useState(void 0),Ie=Object(h.a)(qe,2),Me=Ie[0],Ee=Ie[1],We=c.a.useState(0),Je=Object(h.a)(We,2),ze=Je[0],Ue=Je[1],_e=c.a.useState("Loading..."),Ke=Object(h.a)(_e,2),Ge=Ke[0],Ye=Ke[1],Qe=c.a.useState(!1),Xe=Object(h.a)(Qe,2),Ze=Xe[0],et=Xe[1],tt=c.a.useState(""),at=Object(h.a)(tt,2),nt=at[0],ct=at[1],it=c.a.useState(""),rt=Object(h.a)(it,2),st=rt[0],lt=rt[1],ot=c.a.useState(""),dt=Object(h.a)(ot,2),ut=dt[0],ht=dt[1],jt=c.a.useState(void 0),bt=Object(h.a)(jt,2),ft=bt[0],pt=bt[1],vt=c.a.useState(void 0),xt=Object(h.a)(vt,2),Ot=xt[0],mt=xt[1],gt=c.a.useState(0),kt=Object(h.a)(gt,2),yt=kt[0],St=kt[1],wt=c.a.useState(0),Bt=Object(h.a)(wt,2),Ct=Bt[0],Tt=Bt[1],Nt=function(){return y/100},At=c.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Me;if("object"==typeof Me&&"object"==typeof e&&void 0!==t&&t>=0){var n=t;e.forEach((function(e){n+=e.shares*N(a,e.ticker)})),n!==j&&b(n)}else 0!==j&&b(0)}),[I,x,Me,j]),Dt=c.a.useCallback((function(e,t){return A(e,t)}),[Me,Ct]);c.a.useEffect((function(){var e=setInterval((function(){St((function(e){return e+1})),Dt(Me,Ct)&&(Tt(Date.now()),F(Ee,Ye,At))}),1e3);return function(){return clearInterval(e)}}),[yt,Me,Ee,Ct,Tt,Ye,At,Dt]);var Ft=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]&&a[0],(ee===re||t)&&te(se),F(Ee,Ye,At),(void 0===I||t)&&ue({balance:E,totalDeposits:i,cash:O,feesPaid:D}),(void 0===y||t)&&be({feeRate:S});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.a.useEffect((function(){void 0===I&&Ft()}));var Pt=function(e){L(e),At()},Ht=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n+t,O(a=x+t),de({balance:I,totalDeposits:c,cash:a,feesPaid:T}),At(I,a),i(c),r=new Date(Date.now()),Ye("Depositted $1000 at ".concat(r.toLocaleString()));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x>=t&&(c=n-t,O(a=x-t),de({balance:I,totalDeposits:c,cash:a,feesPaid:T}),At(I,a),i(c),r=new Date(Date.now()),Ye("Withdrew $1000 at ".concat(r.toLocaleString())));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$t=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=I.find((function(e){return t===e.key})),He(a.ticker),ja("Buy"),ia("Buy ".concat(a.ticker)),oa("Spend cash available to purchase ".concat(a.ticker)),va("Cash Available"),Ve(0),Ue(""),Qt(Ut),ta(!1),xe(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(e){e?(ia("Buy ".concat(e.ticker)),oa("Spend cash available to purchase ".concat(e.ticker))):(ia("Buy coins"),oa("Spend cash available to purchase coins"))},Vt=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=I.find((function(e){return t===e.key})),He(a.ticker),ja("Sell"),ia("Sell ".concat(a.ticker)),oa("Sell existing ".concat(a.ticker," for cash")),va("Shares Available"),Ue(""),Ve(0),Qt(_t),ta(!1),ke(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qt=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null!==Pe&&void 0!==Pe?Pe:"coins",ja("Buy"),ia("Buy ".concat(t)),oa("Spend cash available to purchase ".concat(t)),va("Cash Available"),Ue(""),Ve(0),Qt(Ut),ta(!1),Be(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),It=function(){localStorage.removeItem(C),localStorage.removeItem(oe),localStorage.removeItem(he),Ee(void 0),E(void 0),O(void 0),S(void 0),Ft(!0),Ye("All purchases/deposits have been erased")},Mt=function(){},Et=function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===m.Reset?3:e.t0===m.Settings?5:e.t0===m.SaveSettings?7:e.t0===m.BuyMore?10:e.t0===m.SellSome?12:e.t0===m.ToggleBalance?14:e.t0===m.Deposit?16:e.t0===m.Withdraw?18:e.t0===m.BuyNew?20:e.t0===m.BuyShares?22:e.t0===m.SellShares?24:e.t0===m.Help?26:28;break;case 3:return et(!0),Ae(!1),ct("Erase everything?"),lt("All of your purchases and deposits will be erased"),ht("Erase"),pt({handler:It}),mt({handler:Mt}),e.abrupt("break",29);case 5:return Ae(!0),Ue(y),e.abrupt("break",29);case 7:return S(a.feeRate),je({feeRate:a.feeRate}),e.abrupt("break",29);case 10:return $t(a),e.abrupt("break",29);case 12:return Vt(a),e.abrupt("break",29);case 14:return Pt(a),e.abrupt("break",29);case 16:return Ht(a),e.abrupt("break",29);case 18:return Rt(a),e.abrupt("break",29);case 20:return qt(),e.abrupt("break",29);case 22:return zt(a.key,a.shares),e.abrupt("break",29);case 24:return Jt(a.key,a.shares),e.abrupt("break",29);case 26:return Wt(),e.abrupt("break",29);case 28:throw Object.assign(new Error("Unexpected action type: ".concat(t)),{code:402});case 29:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Wt=function(){Q(!0)},Jt=function(e,t){if(Pe){var a=I.find((function(e){return e.ticker===Pe}));if(a)if(e===a.key)if(t>a.shares)console.log("not enough ".concat(a.ticker));else{var c=N(Me,a.ticker),i=t*c*Nt(),r=I.map((function(a){if(a.key===e){var n=a.shares-t,i=Object(l.a)({},a);return i.costBasis=fe(a.shares,a.costBasis,-t,c),i.shares=n,i}return a})),s=x+t*c-i,o=T+i;O(s),At(r,s);var d="Sold ".concat(t/c," shares of ").concat(a.ticker," collecting $").concat(t);i&&(d+=" paying $".concat(i," in fees")),D(o),Ye(d),console.log(d),E(r),de({balance:r,totalDeposits:n,cash:s,feesPaid:o})}else console.log("".concat(e," doesn't match ").concat(a.key));else console.log("".concat(Pe," wasn't found in coinBalance"))}else console.log("Current ticker is null")},zt=function(e,t){if(t>x)console.log("not enough cach");else{var a,c,i=t*Nt();t-=i;var r,l=I.find((function(t){return e===t.key}));if(l)c=N(Me,l.ticker),a=I.map((function(a){if(a.key===e){var n=t/c;if(a.costBasis=fe(a.shares,a.costBasis,n,c),a.shares=n+a.shares,0===a.shares)return null}return a}));else{var o=Me.find((function(t){return e===t.key}));if(!o)return void console.log("ticker ".concat(e," was not found"));l={key:(r=o).key,name:r.name,ticker:r.ticker,shares:0,costBasis:0},c=N(Me,l.ticker),l.shares=t/c,l.costBasis=fe(0,0,l.shares,c),(a=Object(s.a)(I)).push(l)}var d=x-(t+i),u=T+i;D(u),O(d),At(a,d);var h="Purchased ".concat(t/c," shares of ").concat(l.ticker," spending $").concat(t);i&&(h+=" paying $".concat(i," in fees")),Ye(h),console.log(h),E(a),de({balance:a,totalDeposits:n,cash:d,feesPaid:u})}},Ut="Amount to purchase must be greater than zero",_t="Number of shares to sell must be greater than zero",Kt=c.a.useState(""),Gt=Object(h.a)(Kt,2),Yt=Gt[0],Qt=Gt[1],Xt=c.a.useState(!1),Zt=Object(h.a)(Xt,2),ea=Zt[0],ta=Zt[1],aa=c.a.useState(""),na=Object(h.a)(aa,2),ca=na[0],ia=na[1],ra=c.a.useState(""),sa=Object(h.a)(ra,2),la=sa[0],oa=sa[1],da=c.a.useState(""),ua=Object(h.a)(da,2),ha=ua[0],ja=ua[1],ba=c.a.useState(""),fa=Object(h.a)(ba,2),pa=fa[0],va=fa[1],xa=function(e){var t=Number(e.quantity);console.log(t);var a=e.coin;Ue(t);var n=void 0===t||isNaN(t)?0:Number(t);if(Ue(n),n<=0||isNaN(n))Qt(Ut),ta(!1);else if(n>x)Qt("Amount to purchase exceeds cash available"),ta(!1);else{var c=n/N(Me,a.ticker);Qt("Purchase ".concat(c," of ").concat(a.ticker)),ta(!0)}Lt(a)};return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(M,{}),Object(v.jsx)(ae,{totalDeposits:n,netBalance:j,feesCollected:T,feeRate:y,cashAvailable:x,showBalance:R,handleAction:Et}),Object(v.jsx)($,{coinBalance:I,coinTicker:Me,showBalance:R,handleAction:Et}),Object(v.jsxs)("div",{className:"status-bar",children:[Object(v.jsx)("div",{children:"Status: "}),Object(v.jsx)("div",{className:"status-bar-message",children:Ge})]}),Object(v.jsx)(z,{show:ve,cashSharesAvailable:x,dialogTicker:Pe,coinBalance:I,coinTicker:Me,quantity:ze,initialValue:Le,modalStatusMessage:Yt,modalTextFieldStatus:ea,onValidator:xa,modalTitle:ca,inputTitle:la,actionTitle:ha,availability:pa,prefix:"$",handleAction:Et,handleClose:function(){xe(!1)}}),Object(v.jsx)(_,{show:ge,cashSharesAvailable:function(){var e=I?I.find((function(e){return e.ticker===Pe})):void 0;return Boolean(!e)?0:e.shares}(),coinBalance:I,coinTicker:Me,dialogTicker:Pe,quantity:ze,initialValue:Le,modalStatusMessage:Yt,modalTextFieldStatus:ea,onValidator:function(e){var t=e;"string"===typeof e&&(t=e.replace(/[^\d.-]/g,""));var a=I.find((function(e){return e.ticker===Pe}));if(a){Ue(t);var n=void 0===t?0:Number(t);if(n<=0)Qt(_t),ta(!1);else if(n>a.shares)Qt("Amount to sell exceeds shares available"),ta(!1);else{var c=N(Me,a.ticker);Qt("Receive $".concat(n*c," for selling ").concat(a.ticker)),ta(!0)}}else console.log("".concat(Pe," wasn't found in coinBalance"))},modalTitle:ca,inputTitle:la,actionTitle:ha,availability:pa,handleAction:Et,handleClose:function(){ke(!1)}}),Object(v.jsx)(U,{show:we,cashSharesAvailable:x,coinBalance:I,coinTicker:Me,dialogTicker:Pe,modalStatusMessage:Yt,modalTextFieldStatus:ea,onValidator:xa,modalTitle:ca,inputTitle:la,actionTitle:ha,availability:pa,selectCoin:function(e){var t=I.find((function(t){return e===t.ticker}));return void 0===t&&(t=Me.find((function(t){return e===t.ticker}))),Lt(t),He(t.ticker),t},quantity:ze,handleAction:Et,handleClose:function(){Be(!1)}}),Object(v.jsx)(K,{show:ee===se,coinBalance:I,coinTicker:Me,settings:{feeRate:y},modalTitle:"Loading values",handleReload:function(){void 0===I&&(ue({balance:E,totalDeposits:i,cash:O,feesPaid:D}),be({feeRate:S}))},handleClose:function(){te(le),At()}}),Object(v.jsx)(G,{show:Ne,modalTitle:"Settings",inputTitle:"Paper Coin Exchange Settings",settings:{feeRate:ze},onValidator:function(e){Ue(e.feeRate)},handleAction:Et,handleClose:function(){Ae(!1)}}),Object(v.jsx)(ne,{alertHeading:nt,alertMessage:st,alertButtonAcceptText:ut,alertAcceptHandler:ft,alertCancelHandler:Ot,show:Ze,handleClose:function(){et(!1)}}),Object(v.jsx)(ie,{show:Y,handleAction:Et,totalDeposits:n,netBalance:j,showBalance:R,handleClose:function(){Q(!1)}})]})},ve=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,113)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(pe,{})}),document.getElementById("root")),ve()},74:function(e,t,a){},76:function(e,t,a){},80:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.3b579820.chunk.js.map